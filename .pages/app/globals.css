@import "tailwindcss";
@import "prismjs/themes/prism.css" layer(prism-light);
@import "prismjs/themes/prism-twilight.css" layer(prism-dark);
@import "prismjs/plugins/line-numbers/prism-line-numbers.css";
@import "prismjs/plugins/line-highlight/prism-line-highlight.css";

@custom-variant dark (&:where(.dark, .dark *));

/* Light mode Prism styles - VS Code Light+ inspired */
@layer prism-light {
  :root:not(.dark) code[class*="language-"],
  :root:not(.dark) pre[class*="language-"] {
    color: #000000;
    background: #ffffff;
    text-shadow: none;
  }
  
  /* Keywords: using, var, await, async, class, public, etc. */
  :root:not(.dark) .token.keyword { color: #0000ff; font-weight: 600; }
  
  /* Strings */
  :root:not(.dark) .token.string { color: #a31515; }
  
  /* Comments */
  :root:not(.dark) .token.comment { color: #008000; font-style: italic; }
  
  /* Function/Method names */
  :root:not(.dark) .token.function { color: #795e26; }
  
  /* Class names */
  :root:not(.dark) .token.class-name { color: #267f99; }
  
  /* Variables */
  :root:not(.dark) .token.variable { color: #001080; }
  
  /* Numbers and booleans */
  :root:not(.dark) .token.number,
  :root:not(.dark) .token.boolean { color: #098658; }
  
  /* Properties */
  :root:not(.dark) .token.property { color: #001080; }
  
  /* Namespace */
  :root:not(.dark) .token.namespace { color: #267f99; }
}

/* Dark mode Prism styles - VS Code Dark+ inspired */
@layer prism-dark {
  :root.dark code[class*="language-"],
  :root.dark pre[class*="language-"] {
    color: #d4d4d4;
    background: #1e1e1e;
    text-shadow: none;
  }
  
  /* Keywords: using, var, await, async, class, public, etc. */
  :root.dark .token.keyword { color: #569cd6; font-weight: 600; }
  
  /* Strings */
  :root.dark .token.string { color: #ce9178; }
  
  /* Comments */
  :root.dark .token.comment { color: #6a9955; font-style: italic; }
  
  /* Function/Method names */
  :root.dark .token.function { color: #dcdcaa; }
  
  /* Class names */
  :root.dark .token.class-name { color: #4ec9b0; }
  
  /* Variables */
  :root.dark .token.variable { color: #9cdcfe; }
  
  /* Numbers and booleans */
  :root.dark .token.number,
  :root.dark .token.boolean { color: #b5cea8; }
  
  /* Properties */
  :root.dark .token.property { color: #9cdcfe; }
  
  /* Namespace */
  :root.dark .token.namespace { color: #4ec9b0; }
}

/* Line numbers styling for light/dark mode */
pre[class*="language-"],
code[class*="language-"] {
  line-height: 1.5;
  font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
  border: none !important;
  box-shadow: none !important;
}

pre[class*="language-"].line-numbers {
  position: relative;
  padding-left: 3.8em;
  counter-reset: linenumber;
}

pre[class*="language-"].line-numbers > code {
  position: relative;
  white-space: inherit;
  line-height: 1.5;
}

.line-numbers .line-numbers-rows {
  position: absolute;
  pointer-events: none;
  top: 0;
  font-size: 100%;
  left: -3.8em;
  width: 3em;
  letter-spacing: -1px;
  user-select: none;
  line-height: 1.5;
}

.line-numbers-rows > span {
  display: block;
  counter-increment: linenumber;
  line-height: 1.5;
}

.line-numbers-rows > span:before {
  content: counter(linenumber);
  display: block;
  padding-right: 0.8em;
  text-align: right;
  line-height: 1.5;
}

:root:not(.dark) .line-numbers .line-numbers-rows {
  border-right: 1px solid #d7dce0;
}

:root:not(.dark) .line-numbers-rows > span:before {
  color: #858585;
}

:root.dark .line-numbers .line-numbers-rows {
  border-right: 1px solid #3e3e42;
}

:root.dark .line-numbers-rows > span:before {
  color: #858585;
}

/* Line highlight styling */
:root:not(.dark) .line-highlight {
  background: rgba(107, 114, 128, 0.1);
  border-left: 3px solid #3b82f6;
}

:root.dark .line-highlight {
  background: rgba(86, 156, 214, 0.15);
  border-left: 3px solid #569cd6;
}

/* Prism operator & punctuation pill overrides (light/dark) */
:root:not(.dark) code[class*="language-"] .token.operator,
:root:not(.dark) pre[class*="language-"] .token.operator,
:root:not(.dark) code[class*="language-"] .token.punctuation,
:root:not(.dark) pre[class*="language-"] .token.punctuation {
  background: transparent !important;
  box-shadow: none !important;
  text-shadow: none !important;
  border-radius: 0 !important;
  padding: 0 !important;
  color: inherit !important;
}

:root.dark code[class*="language-"] .token.operator,
:root.dark pre[class*="language-"] .token.operator,
:root.dark code[class*="language-"] .token.punctuation,
:root.dark pre[class*="language-"] .token.punctuation {
  background: transparent !important;
  box-shadow: none !important;
  text-shadow: none !important;
  border-radius: 0 !important;
  padding: 0 !important;
  color: inherit !important;
}

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --primary: 201 96% 32%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 201 96% 32%;
    --radius: 0.5rem;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --primary: 201 96% 32%;
    --primary-foreground: 222.2 47.4% 11.2%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 201 96% 32%;
  }
}

@layer base {
  * {
    border-color: theme('colors.gray.200');
  }
  
  .dark * {
    border-color: theme('colors.gray.800');
  }
  
  html {
    scroll-behavior: smooth;
  }
  
  body {
    @apply bg-white text-gray-900 dark:bg-gray-950 dark:text-gray-100;
    font-feature-settings: "rlig" 1, "calt" 1;
  }

  /* Modern Custom Scrollbar Design */
  ::-webkit-scrollbar {
    width: 12px;
    height: 12px;
  }

  /* Light Mode Scrollbar */
  ::-webkit-scrollbar-track {
    background: #f9fafb;
    border-radius: 10px;
  }

  ::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, #d1d5db, #9ca3af);
    border-radius: 10px;
    border: 2px solid transparent;
    background-clip: padding-box;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, #9ca3af, #6b7280);
  }
  
  ::-webkit-scrollbar-thumb:active {
    background: linear-gradient(180deg, #60a5fa, #3b82f6);
  }
  
  ::-webkit-scrollbar-corner {
    background: #f9fafb;
  }
  
  /* Dark Mode Scrollbar */
  .dark ::-webkit-scrollbar-track {
    background: #111827;
  }

  .dark ::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, #374151, #4b5563);
  }

  .dark ::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, #4b5563, #6b7280);
  }
  
  .dark ::-webkit-scrollbar-thumb:active {
    background: linear-gradient(180deg, #3b82f6, #2563eb);
  }
  
  .dark ::-webkit-scrollbar-corner {
    background: #111827;
  }
  
  /* Thin scrollbar for specific containers */
  .thin-scrollbar::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
  
  .thin-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }
  
  .thin-scrollbar::-webkit-scrollbar-thumb {
    background: #d1d5db;
    border-radius: 8px;
    border: 1px solid transparent;
  }
  
  .dark .thin-scrollbar::-webkit-scrollbar-thumb {
    background: #374151;
  }
  
  .thin-scrollbar::-webkit-scrollbar-thumb:hover {
    background: #9ca3af;
  }
  
  .dark .thin-scrollbar::-webkit-scrollbar-thumb:hover {
    background: #4b5563;
  }
  
  /* Firefox scrollbar support */
  * {
    scrollbar-width: thin;
    scrollbar-color: rgb(156, 163, 175) rgb(249, 250, 251);
  }
  
  .dark * {
    scrollbar-color: rgb(75, 85, 99) rgb(17, 24, 39);
  }
  
  /* Minimal scrollbar for code blocks */
  pre::-webkit-scrollbar {
    height: 6px;
  }
  
  pre::-webkit-scrollbar-track {
    background: #f3f4f6;
    border-radius: 3px;
  }
  
  .dark pre::-webkit-scrollbar-track {
    background: #1f2937;
  }
  
  pre::-webkit-scrollbar-thumb {
    background: #9ca3af;
    border-radius: 3px;
  }
  
  .dark pre::-webkit-scrollbar-thumb {
    background: #4b5563;
  }
  
  pre::-webkit-scrollbar-thumb:hover {
    background: #6b7280;
  }
  
  .dark pre::-webkit-scrollbar-thumb:hover {
    background: #6b7280;
  }
  
  /* Hide scrollbar for specific elements */
  .no-scrollbar {
    scrollbar-width: none;
    -ms-overflow-style: none;
  }
  
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
  
  /* Overlay scrollbar (appears only on hover) */
  .overlay-scrollbar {
    overflow: overlay;
  }
  
  .overlay-scrollbar::-webkit-scrollbar {
    width: 10px;
    height: 10px;
  }
  
  .overlay-scrollbar:not(:hover)::-webkit-scrollbar-thumb {
    background: transparent;
  }
  
  .overlay-scrollbar:hover::-webkit-scrollbar-thumb {
    background: rgba(156, 163, 175, 0.5);
    border-radius: 10px;
  }
  
  .dark .overlay-scrollbar:hover::-webkit-scrollbar-thumb {
    background: rgba(75, 85, 99, 0.5);
  }
  
  /* Custom animation for smooth scrollbar appearance */
  ::-webkit-scrollbar-thumb {
    transition: background-color 0.2s ease;
  }

  /* Code blocks */
  pre {
    @apply rounded-lg overflow-x-auto;
  }

  pre code {
    @apply text-sm;
  }

  /* Headings */
  h1 {
    @apply text-4xl font-bold tracking-tight;
  }

  h2 {
    @apply text-3xl font-semibold tracking-tight;
  }

  h3 {
    @apply text-2xl font-semibold;
  }

  h4 {
    @apply text-xl font-medium;
  }

  /* Links */
  a {
    @apply text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 transition-colors;
  }
}

@layer components {
  .container {
    @apply mx-auto px-4 sm:px-6 lg:px-8;
  }

  .btn {
    @apply inline-flex items-center justify-center rounded-lg px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none;
  }

  .btn-primary {
    @apply bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500;
  }

  .btn-secondary {
    @apply bg-gray-200 text-gray-900 hover:bg-gray-300 dark:bg-gray-800 dark:text-gray-100 dark:hover:bg-gray-700 focus:ring-gray-500;
  }

  .card {
    @apply bg-white dark:bg-gray-900 rounded-xl shadow-sm border border-gray-200 dark:border-gray-800;
  }

  .badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
  }
}